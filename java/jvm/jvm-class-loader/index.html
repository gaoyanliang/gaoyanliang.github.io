<!DOCTYPE html>
<html lang='en'>

<head>
  <meta name="generator" content="Hexo 5.4.0">
  <meta charset="utf-8">
  

  <meta http-equiv='x-dns-prefetch-control' content='on' />
  <link rel='dns-prefetch' href='https://fastly.jsdelivr.net'>
  <link rel="preconnect" href="https://fastly.jsdelivr.net" crossorigin>
  <link rel='dns-prefetch' href='//unpkg.com'>

  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" content="#f8f8f8">
  <title>JVM - yanliang</title>

  
    <meta name="description" content="ç±»åŠ è½½å­ç³»ç»Ÿä¸»è¦åŒ…å«å¦‚ä¸‹å‡ é¡¹åŠŸèƒ½ï¼š  è´Ÿè´£ä»æ–‡ä»¶ç³»ç»Ÿæˆ–æ˜¯ç½‘ç»œä¸­åŠ è½½.classæ–‡ä»¶ï¼Œclassæ–‡ä»¶åœ¨æ–‡ä»¶å¼€å¤´æœ‰ç‰¹å®šçš„æ–‡ä»¶æ ‡è¯†ã€‚  æŠŠåŠ è½½åçš„classç±»ä¿¡æ¯å­˜æ”¾äºæ–¹æ³•åŒºï¼Œé™¤äº†ç±»ä¿¡æ¯ä¹‹å¤–ï¼Œæ–¹æ³•åŒºè¿˜ä¼šå­˜æ”¾è¿è¡Œæ—¶å¸¸é‡æ± ä¿¡æ¯ï¼Œå¯èƒ½è¿˜åŒ…æ‹¬å­—ç¬¦ä¸²å­—é¢é‡å’Œæ•°å­—å¸¸é‡ï¼ˆè¿™éƒ¨åˆ†å¸¸é‡ä¿¡æ¯æ˜¯Classæ–‡ä»¶ä¸­å¸¸é‡æ± éƒ¨åˆ†çš„å†…å­˜æ˜ å°„ï¼‰ã€‚ ClassLoaderåªè´Ÿè´£classæ–‡ä»¶çš„åŠ è½½ï¼Œè‡³äºå®ƒæ˜¯å¦å¯ä»¥è¿è¡Œï¼Œåˆ™ç”±Executio">
<meta property="og:type" content="article">
<meta property="og:title" content="JVM ç±»åŠ è½½æœºåˆ¶">
<meta property="og:url" content="https://yanliang.cool/java/jvm/jvm-class-loader/">
<meta property="og:site_name" content="yanliang">
<meta property="og:description" content="ç±»åŠ è½½å­ç³»ç»Ÿä¸»è¦åŒ…å«å¦‚ä¸‹å‡ é¡¹åŠŸèƒ½ï¼š  è´Ÿè´£ä»æ–‡ä»¶ç³»ç»Ÿæˆ–æ˜¯ç½‘ç»œä¸­åŠ è½½.classæ–‡ä»¶ï¼Œclassæ–‡ä»¶åœ¨æ–‡ä»¶å¼€å¤´æœ‰ç‰¹å®šçš„æ–‡ä»¶æ ‡è¯†ã€‚  æŠŠåŠ è½½åçš„classç±»ä¿¡æ¯å­˜æ”¾äºæ–¹æ³•åŒºï¼Œé™¤äº†ç±»ä¿¡æ¯ä¹‹å¤–ï¼Œæ–¹æ³•åŒºè¿˜ä¼šå­˜æ”¾è¿è¡Œæ—¶å¸¸é‡æ± ä¿¡æ¯ï¼Œå¯èƒ½è¿˜åŒ…æ‹¬å­—ç¬¦ä¸²å­—é¢é‡å’Œæ•°å­—å¸¸é‡ï¼ˆè¿™éƒ¨åˆ†å¸¸é‡ä¿¡æ¯æ˜¯Classæ–‡ä»¶ä¸­å¸¸é‡æ± éƒ¨åˆ†çš„å†…å­˜æ˜ å°„ï¼‰ã€‚ ClassLoaderåªè´Ÿè´£classæ–‡ä»¶çš„åŠ è½½ï¼Œè‡³äºå®ƒæ˜¯å¦å¯ä»¥è¿è¡Œï¼Œåˆ™ç”±Executio">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/gaoyanliang/cdn/blog/img/post/java/jvm/jvm-36.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/gaoyanliang/cdn/blog/img/post/java/jvm/jvm-37.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/gaoyanliang/cdn/blog/img/post/java/jvm/jvm-38.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/gaoyanliang/cdn/blog/img/post/java/jvm/jvm-39.png">
<meta property="article:published_time" content="2021-10-14T00:00:00.000Z">
<meta property="article:modified_time" content="2021-10-14T00:00:00.000Z">
<meta property="article:author" content="yanliang">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="JVM">
<meta property="article:tag" content="ç±»åŠ è½½æœºåˆ¶">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/gaoyanliang/cdn/blog/img/post/java/jvm/jvm-36.png">
  
  

  <!-- feed -->
  

  
    
<link rel="stylesheet" href="/css/main.css">

  

  
    <link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/gaoyanliang/cdn@main/blog/img/icon.svg">
  

  

  


  
</head>

<body>
  


  <div class='l_body' id='start'>
    <aside class='l_left' layout='post'>
    

  

<header class="header">

<div class="logo-wrap"><a class="avatar" href="/about/"><div class="bg" style="opacity:0;background-image:url(https://fastly.jsdelivr.net/gh/cdn-x/placeholder@1.0.2/avatar/round/rainbow64@3x.webp);"></div><img no-lazy class="avatar" src="https://cdn.jsdelivr.net/gh/gaoyanliang/cdn@main/blog/img/index-head.png" onerror="javascript:this.classList.add('error');this.src='https://fastly.jsdelivr.net/gh/cdn-x/placeholder@1.0.1/image/2659360.svg';"></a><a class="title" href="/"><div class="main" ff="title"><div style="line-height: 1.5; letter-spacing: 3px; position: relative;">Yanliang</div> <div style="font-size: .85rem; letter-spacing: 1px; font-weight: 500;">Believe in yourself.</div></div></a></div>


<nav class="menu dis-select"><a class="nav-item active" href="/">Blog</a><a class="nav-item" href="/wiki/">Wiki</a><a class="nav-item" href="/friends/">Friends</a><a class="nav-item" href="/about/">More</a></nav></header>


<div class="widgets">

<div class="widget-wrap single" id="toc"><div class="widget-header cap dis-select"><span class="name">JVM ç±»åŠ è½½æœºåˆ¶</span></div><div class="widget-body fs14"><div class="doc-tree active"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B1%BB%E5%8A%A0%E8%BD%BD%E7%9A%84%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B"><span class="toc-text">ç±»åŠ è½½çš„æ‰§è¡Œè¿‡ç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A0%E8%BD%BD"><span class="toc-text">åŠ è½½</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5"><span class="toc-text">è¿æ¥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-text">åˆå§‹åŒ–</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cinit-%E5%92%8C-init-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">cinit å’Œ init çš„åŒºåˆ«</span></a></li></ol></div></div></div>


</div>
<footer class="footer dis-select"><div class="social-wrap"><a class="social" title="Back to Top" href="#start" rel="noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/gaoyanliang/cdn@main/blog/img/social/top.svg"/></a><a class="social" title="GitHub" href="https://github.com/gyl-coder/" target="_blank" rel="external nofollow noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/gaoyanliang/cdn@main/blog/img/social/github.svg"/></a><a class="social" title="Spotify" href="https://open.spotify.com/" target="_blank" rel="external nofollow noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/gaoyanliang/cdn@main/blog/img/social/music.svg"/></a><a class="social" title="Unsplash" href="https://unsplash.com/" target="_blank" rel="external nofollow noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/gaoyanliang/cdn@main/blog/img/social/music.svg"/></a><a class="social" title="Comments" href="/about/#comments" rel="noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/gaoyanliang/cdn@main/blog/img/social/message.svg"/></a></div></footer>

    </aside>
    <div class='l_main'>
      

      


<div class="bread-nav fs12"><div id="breadcrumb"><a class="cap breadcrumb" href="/">Home</a><span class="sep"></span><a class="cap breadcrumb" href="/">Blog</a><span class="sep"></span><a class="cap breadcrumb-link" href="/categories/java/">Java</a> <span class="sep"></span> <a class="cap breadcrumb-link" href="/categories/java/jvm/">JVM</a></div><div id="post-meta">ğŸ’§ Posted on&nbsp;<time datetime="2021-10-14T00:00:00.000Z">Oct 14, 2021</time></div></div>

<article class='content md post'>
<h1 class="article-title"><span>JVM ç±»åŠ è½½æœºåˆ¶</span></h1>
<p>ç±»åŠ è½½å­ç³»ç»Ÿä¸»è¦åŒ…å«å¦‚ä¸‹å‡ é¡¹åŠŸèƒ½ï¼š</p>
<ol>
<li>è´Ÿè´£ä»æ–‡ä»¶ç³»ç»Ÿæˆ–æ˜¯ç½‘ç»œä¸­åŠ è½½.classæ–‡ä»¶ï¼Œclassæ–‡ä»¶åœ¨æ–‡ä»¶å¼€å¤´æœ‰ç‰¹å®šçš„æ–‡ä»¶æ ‡è¯†ã€‚ </li>
<li>æŠŠåŠ è½½åçš„classç±»ä¿¡æ¯å­˜æ”¾äºæ–¹æ³•åŒºï¼Œé™¤äº†ç±»ä¿¡æ¯ä¹‹å¤–ï¼Œæ–¹æ³•åŒºè¿˜ä¼šå­˜æ”¾è¿è¡Œæ—¶å¸¸é‡æ± ä¿¡æ¯ï¼Œå¯èƒ½è¿˜åŒ…æ‹¬å­—ç¬¦ä¸²å­—é¢é‡å’Œæ•°å­—å¸¸é‡ï¼ˆè¿™éƒ¨åˆ†å¸¸é‡ä¿¡æ¯æ˜¯Classæ–‡ä»¶ä¸­å¸¸é‡æ± éƒ¨åˆ†çš„å†…å­˜æ˜ å°„ï¼‰ã€‚</li>
<li>ClassLoaderåªè´Ÿè´£classæ–‡ä»¶çš„åŠ è½½ï¼Œè‡³äºå®ƒæ˜¯å¦å¯ä»¥è¿è¡Œï¼Œåˆ™ç”±Execution Engineå†³å®šã€‚ </li>
<li>å¦‚æœè°ƒç”¨æ„é€ å™¨å®ä¾‹åŒ–å¯¹è±¡ï¼Œåˆ™è¯¥å¯¹è±¡å­˜æ”¾åœ¨å †åŒºã€‚</li>
</ol>
<blockquote>
<p>è™šæ‹ŸæœºæŠŠæè¿°ç±»çš„æ•°æ®ä» Class æ–‡ä»¶åŠ è½½åˆ°å†…å­˜ï¼Œå¹¶å¯¹æ•°æ®è¿›è¡Œæ ¡éªŒã€è½¬æ¢è§£æå’Œåˆå§‹åŒ–ï¼Œæœ€ç»ˆå½¢æˆå¯ä»¥è¢«è™šæ‹Ÿæœºç›´æ¥ä½¿ç”¨çš„Javaç±»å‹ï¼Œè¿™å°±æ˜¯è™šæ‹Ÿæœºçš„ç±»åŠ è½½æœºåˆ¶ã€‚</p>
</blockquote>
<span id="more"></span>

<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/gaoyanliang/cdn/blog/img/post/java/jvm/jvm-36.png"></p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/gaoyanliang/cdn/blog/img/post/java/jvm/jvm-37.png"></p>
<h2 id="ç±»åŠ è½½çš„æ‰§è¡Œè¿‡ç¨‹"><a href="#ç±»åŠ è½½çš„æ‰§è¡Œè¿‡ç¨‹" class="headerlink" title="ç±»åŠ è½½çš„æ‰§è¡Œè¿‡ç¨‹"></a>ç±»åŠ è½½çš„æ‰§è¡Œè¿‡ç¨‹</h2><p>ç±»ä»è¢«åŠ è½½åˆ°è™šæ‹Ÿæœºå†…å­˜ä¸­å¼€å§‹ï¼Œåˆ°å¸è½½å‡ºå†…å­˜ï¼Œå®ƒçš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸåŒ…æ‹¬ï¼šåŠ è½½ï¼ˆLoadingï¼‰ã€éªŒè¯ï¼ˆVerificationï¼‰ã€å‡†å¤‡ï¼ˆPreparationï¼‰ã€è§£æï¼ˆResolutionï¼‰ã€åˆå§‹åŒ–ï¼ˆInitiallizationï¼‰ã€ä½¿ç”¨ï¼ˆUsingï¼‰å’Œå¸è½½ï¼ˆUnloadingï¼‰è¿™7ä¸ªé˜¶æ®µã€‚å…¶ä¸­éªŒè¯ã€å‡†å¤‡ã€è§£æ3ä¸ªéƒ¨åˆ†ç»Ÿç§°ä¸ºè¿æ¥ï¼ˆLinkingï¼‰ï¼Œè¿™ä¸ƒä¸ªé˜¶æ®µçš„å‘ç”Ÿé¡ºåºå¦‚ä¸‹å›¾ï¼š</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/gaoyanliang/cdn/blog/img/post/java/jvm/jvm-38.png"></p>
<p>ä¸Šå›¾ä¸­ï¼ŒåŠ è½½ã€éªŒè¯ã€å‡†å¤‡ã€åˆå§‹åŒ–ã€å¸è½½è¿™5ä¸ªé˜¶æ®µçš„é¡ºåºæ˜¯ç¡®å®šçš„ï¼Œç±»çš„åŠ è½½è¿‡ç¨‹å¿…é¡»æŒ‰ç…§è¿™ç§é¡ºåºæŒ‰éƒ¨å°±ç­åœ°å¼€å§‹ï¼Œè€Œè§£æé˜¶æ®µä¸ä¸€å®šï¼šå®ƒåœ¨æŸäº›æƒ…å†µä¸‹å¯ä»¥åˆå§‹åŒ–é˜¶æ®µä¹‹ååœ¨å¼€å§‹ï¼Œè¿™æ˜¯ä¸ºäº†æ”¯æŒJavaè¯­è¨€çš„è¿è¡Œæ—¶ç»‘å®šï¼ˆä¹Ÿç§°ä¸ºåŠ¨æ€ç»‘å®šï¼‰ã€‚æ¥ä¸‹æ¥è®²è§£åŠ è½½ã€éªŒè¯ã€å‡†å¤‡ã€è§£æã€åˆå§‹åŒ–äº”ä¸ªæ­¥éª¤ï¼Œè¿™äº”ä¸ªæ­¥éª¤ç»„æˆäº†ä¸€ä¸ªå®Œæ•´çš„ç±»åŠ è½½è¿‡ç¨‹ã€‚ä½¿ç”¨æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œå¸è½½å±äºGCçš„å·¥ä½œ ã€‚</p>
<h3 id="åŠ è½½"><a href="#åŠ è½½" class="headerlink" title="åŠ è½½"></a>åŠ è½½</h3><p>åŠ è½½æ˜¯ç±»åŠ è½½çš„ç¬¬ä¸€ä¸ªé˜¶æ®µã€‚æœ‰ä¸¤ç§æ—¶æœºä¼šè§¦å‘ç±»åŠ è½½ï¼š</p>
<blockquote>
<ol>
<li>é¢„åŠ è½½</li>
</ol>
</blockquote>
<p>è™šæ‹Ÿæœºå¯åŠ¨æ—¶åŠ è½½ï¼ŒåŠ è½½çš„æ˜¯JAVA_HOME/lib/ä¸‹çš„rt.jarä¸‹çš„.classæ–‡ä»¶ï¼Œè¿™ä¸ªjaråŒ…é‡Œé¢çš„å†…å®¹æ˜¯ç¨‹åºè¿è¡Œæ—¶éå¸¸å¸¸å¸¸ç”¨åˆ°çš„ï¼Œåƒjava.lang.*ã€java.util.ã€java.io. ç­‰ç­‰ï¼Œå› æ­¤éšç€è™šæ‹Ÿæœºä¸€èµ·åŠ è½½ã€‚è¦è¯æ˜è¿™ä¸€ç‚¹å¾ˆç®€å•ï¼Œå†™ä¸€ä¸ªç©ºçš„mainå‡½æ•°ï¼Œè®¾ç½®è™šæ‹Ÿæœºå‚æ•°ä¸ºâ€-XX:+TraceClassLoadingâ€æ¥è·å–ç±»åŠ è½½ä¿¡æ¯ï¼Œè¿è¡Œä¸€ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[Opened E:\developer\JDK8\JDK\jre\lib\rt.jar]</span><br><span class="line">[Loaded java.lang.Object from E:\developer\JDK8\JDK\jre\lib\rt.jar]</span><br><span class="line">[Loaded java.io.Serializable from E:\developer\JDK8\JDK\jre\lib\rt.jar]</span><br><span class="line">[Loaded java.lang.Comparable from E:\developer\JDK8\JDK\jre\lib\rt.jar]</span><br><span class="line">[Loaded java.lang.CharSequence from E:\developer\JDK8\JDK\jre\lib\rt.jar]</span><br><span class="line">[Loaded java.lang.String from E:\developer\JDK8\JDK\jre\lib\rt.jar]</span><br><span class="line">[Loaded java.lang.reflect.AnnotatedElement from E:\developer\JDK8\JDK\jre\lib\rt.jar]</span><br><span class="line">......</span><br></pre></td></tr></table></figure>

<blockquote>
<ol start="2">
<li>è¿è¡Œæ—¶åŠ è½½</li>
</ol>
</blockquote>
<p>è™šæ‹Ÿæœºåœ¨ç”¨åˆ°ä¸€ä¸ª.classæ–‡ä»¶çš„æ—¶å€™ï¼Œä¼šå…ˆå»å†…å­˜ä¸­æŸ¥çœ‹ä¸€ä¸‹è¿™ä¸ª.classæ–‡ä»¶æœ‰æ²¡æœ‰è¢«åŠ è½½ï¼Œå¦‚æœæ²¡æœ‰å°±ä¼šæŒ‰ç…§ç±»çš„å…¨é™å®šåæ¥åŠ è½½è¿™ä¸ªç±»ã€‚</p>
<p>é‚£ä¹ˆï¼ŒåŠ è½½é˜¶æ®µåšäº†ä»€ä¹ˆï¼Œå…¶å®åŠ è½½é˜¶æ®µåšäº†æœ‰ä¸‰ä»¶äº‹æƒ…ï¼š</p>
<ul>
<li>é€šè¿‡ä¸€ä¸ªç±»çš„å…¨é™å®šåæ¥è·å–å®šä¹‰æ­¤ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚æµã€‚</li>
<li>å°†è¿™ä¸ªå­—èŠ‚æµæ‰€ä»£è¡¨çš„é™æ€å­˜å‚¨ç»“æ„è½¬åŒ–ä¸ºæ–¹æ³•åŒºçš„è¿è¡Œæ—¶æ•°æ®ç»“æ„ã€‚</li>
<li>åœ¨å†…å­˜ä¸­ç”Ÿæˆä¸€ä¸ªä»£è¡¨è¿™ä¸ª.classæ–‡ä»¶çš„java.lang.Classå¯¹è±¡ï¼Œä½œä¸ºæ–¹æ³•åŒºè¿™ä¸ªç±»çš„å„ç§æ•°æ®çš„è®¿é—®å…¥å£ã€‚ä¸€èˆ¬è¿™ä¸ªClassæ˜¯åœ¨å †é‡Œçš„ï¼Œä¸è¿‡HotSpotè™šæ‹Ÿæœºæ¯”è¾ƒç‰¹æ®Šï¼Œè¿™ä¸ªClasså¯¹è±¡æ˜¯æ”¾åœ¨æ–¹æ³•åŒºä¸­çš„ã€‚</li>
</ul>
<p>è™šæ‹Ÿæœºè§„èŒƒå¯¹è¿™ä¸‰ç‚¹çš„è¦æ±‚å¹¶ä¸å…·ä½“ï¼Œå› æ­¤è™šæ‹Ÿæœºå®ç°ä¸å…·ä½“åº”ç”¨çš„çµæ´»åº¦éƒ½æ˜¯ç›¸å½“å¤§çš„ã€‚ä¾‹å¦‚ç¬¬ä¸€æ¡ï¼Œæ ¹æœ¬æ²¡æœ‰æŒ‡æ˜äºŒè¿›åˆ¶å­—èŠ‚æµè¦ä»å“ªé‡Œæ¥ã€æ€ä¹ˆæ¥ï¼Œå› æ­¤å•å•å°±è¿™ä¸€æ¡ï¼Œå°±èƒ½å˜å‡ºè®¸å¤šèŠ±æ ·æ¥ï¼š</p>
<ul>
<li>ä»zipåŒ…ä¸­è·å–ï¼Œè¿™å°±æ˜¯ä»¥åjarã€earã€waræ ¼å¼çš„åŸºç¡€</li>
<li>ä»ç½‘ç»œä¸­è·å–ï¼Œå…¸å‹åº”ç”¨å°±æ˜¯Applet</li>
<li>è¿è¡Œæ—¶è®¡ç®—ç”Ÿæˆï¼Œå…¸å‹åº”ç”¨å°±æ˜¯åŠ¨æ€ä»£ç†æŠ€æœ¯</li>
<li>ç”±å…¶ä»–æ–‡ä»¶ç”Ÿæˆï¼Œå…¸å‹åº”ç”¨å°±æ˜¯JSPï¼Œå³ç”±JSPç”Ÿæˆå¯¹åº”çš„.classæ–‡ä»¶</li>
<li>ä»æ•°æ®åº“ä¸­è¯»å–ï¼Œè¿™ç§åœºæ™¯æ¯”è¾ƒå°‘è§</li>
</ul>
<p>æ€»è€Œè¨€ä¹‹ï¼Œåœ¨ç±»åŠ è½½æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œè¿™éƒ¨åˆ†æ˜¯å¯¹äºå¼€å‘è€…æ¥è¯´å¯æ§æ€§æœ€å¼ºçš„ä¸€ä¸ªé˜¶æ®µã€‚</p>
<h3 id="è¿æ¥"><a href="#è¿æ¥" class="headerlink" title="è¿æ¥"></a>è¿æ¥</h3><p>é“¾æ¥åŒ…å«ä¸‰ä¸ªæ­¥éª¤ï¼š åˆ†åˆ«æ˜¯ éªŒè¯Verification , å‡†å¤‡Preparation , è§£æResolution ä¸‰ä¸ªè¿‡ç¨‹ã€‚</p>
<blockquote>
<ol>
<li>éªŒè¯ Verification</li>
</ol>
</blockquote>
<p>è¿æ¥é˜¶æ®µçš„ç¬¬ä¸€æ­¥ï¼Œè¿™ä¸€é˜¶æ®µçš„ç›®çš„æ˜¯ä¸ºäº†ç¡®ä¿.classæ–‡ä»¶çš„å­—èŠ‚æµä¸­åŒ…å«çš„ä¿¡æ¯ç¬¦åˆå½“å‰è™šæ‹Ÿæœºçš„è¦æ±‚ï¼Œå¹¶ä¸”ä¸ä¼šå±å®³è™šæ‹Ÿæœºè‡ªèº«çš„å®‰å…¨ã€‚</p>
<p>Javaè¯­è¨€æœ¬èº«æ˜¯ç›¸å¯¹å®‰å…¨çš„è¯­è¨€ï¼ˆç›¸å¯¹C/C++æ¥è¯´ï¼‰ï¼Œä½†æ˜¯å‰é¢è¯´è¿‡ï¼Œ.classæ–‡ä»¶æœªå¿…è¦ä»Javaæºç ç¼–è¯‘è€Œæ¥ï¼Œå¯ä»¥ä½¿ç”¨ä»»ä½•é€”å¾„äº§ç”Ÿï¼Œç”šè‡³åŒ…æ‹¬ç”¨åå…­è¿›åˆ¶ç¼–è¾‘å™¨ç›´æ¥ç¼–å†™æ¥äº§ç”Ÿ.classæ–‡ä»¶ã€‚åœ¨å­—èŠ‚ç è¯­è¨€å±‚é¢ä¸Šï¼ŒJavaä»£ç è‡³å°‘ä»è¯­ä¹‰ä¸Šæ˜¯å¯ä»¥è¡¨è¾¾å‡ºæ¥çš„ã€‚è™šæ‹Ÿæœºå¦‚æœä¸æ£€æŸ¥è¾“å…¥çš„å­—èŠ‚æµï¼Œå¯¹å…¶å®Œå…¨ä¿¡ä»»çš„è¯ï¼Œå¾ˆå¯èƒ½ä¼šå› ä¸ºè½½å…¥äº†æœ‰å®³çš„å­—èŠ‚æµè€Œå¯¼è‡´ç³»ç»Ÿå´©æºƒï¼Œæ‰€ä»¥éªŒè¯æ˜¯è™šæ‹Ÿæœºå¯¹è‡ªèº«ä¿æŠ¤çš„ä¸€é¡¹é‡è¦å·¥ä½œã€‚</p>
<p>éªŒè¯é˜¶æ®µå°†åšä¸€ä¸‹å‡ ä¸ªå·¥ä½œï¼Œå…·ä½“å°±ä¸ç»†è®²äº†ï¼ˆè¯¦æƒ…å¯å‚è€ƒã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹ï¼‰ï¼Œè¿™æ˜¯è™šæ‹Ÿæœºå®ç°å±‚é¢çš„é—®é¢˜ï¼š</p>
<ul>
<li>æ–‡ä»¶æ ¼å¼éªŒè¯</li>
<li>å…ƒæ•°æ®éªŒè¯</li>
<li>å­—èŠ‚ç éªŒè¯</li>
<li>ç¬¦å·å¼•ç”¨éªŒè¯</li>
</ul>
<blockquote>
<ol start="2">
<li>å‡†å¤‡Preparation</li>
</ol>
</blockquote>
<p>å‡†å¤‡é˜¶æ®µæ˜¯æ­£å¼ä¸ºç±»å˜é‡åˆ†é…å†…å­˜å¹¶è®¾ç½®å…¶åˆå§‹å€¼çš„é˜¶æ®µï¼Œè¿™äº›å˜é‡æ‰€ä½¿ç”¨çš„å†…å­˜éƒ½å°†åœ¨æ–¹æ³•åŒºä¸­åˆ†é…ã€‚å…³äºè¿™ç‚¹ï¼Œæœ‰ä¸¤ä¸ªåœ°æ–¹æ³¨æ„ä¸€ä¸‹ï¼š</p>
<ol>
<li>è¿™æ—¶å€™è¿›è¡Œå†…å­˜åˆ†é…çš„ä»…ä»…æ˜¯ç±»å˜é‡ï¼ˆè¢«staticä¿®é¥°çš„å˜é‡ï¼‰ï¼Œè€Œä¸æ˜¯å®ä¾‹å˜é‡ï¼Œå®ä¾‹å˜é‡å°†ä¼šåœ¨å¯¹è±¡å®ä¾‹åŒ–çš„æ—¶å€™éšç€å¯¹è±¡ä¸€èµ·åˆ†é…åœ¨Javaå †ä¸­</li>
<li>è¿™ä¸ªé˜¶æ®µèµ‹åˆå§‹å€¼çš„å˜é‡æŒ‡çš„æ˜¯é‚£äº›ä¸è¢«finalä¿®é¥°çš„staticå˜é‡ï¼Œæ¯”å¦‚â€public static int value = 123â€ï¼Œvalueåœ¨å‡†å¤‡é˜¶æ®µè¿‡åæ˜¯0è€Œä¸æ˜¯123ï¼Œç»™valueèµ‹å€¼ä¸º123çš„åŠ¨ä½œå°†åœ¨åˆå§‹åŒ–é˜¶æ®µæ‰è¿›è¡Œï¼›æ¯”å¦‚â€public static final int value =123;â€å°±ä¸ä¸€æ ·äº†ï¼Œåœ¨å‡†å¤‡é˜¶æ®µï¼Œè™šæ‹Ÿæœºå°±ä¼šç»™valueèµ‹å€¼ä¸º123ã€‚</li>
</ol>
<p>å„ä¸ªæ•°æ®ç±»å‹çš„é›¶å€¼å¦‚ä¸‹è¡¨ï¼š</p>
<table>
<thead>
<tr>
<th>æ•°æ®ç±»å‹</th>
<th>é›¶å€¼</th>
</tr>
</thead>
<tbody><tr>
<td>int</td>
<td>0</td>
</tr>
<tr>
<td>long</td>
<td>0L</td>
</tr>
<tr>
<td>short</td>
<td>(short)0</td>
</tr>
<tr>
<td>chart</td>
<td>â€˜\u0000â€™</td>
</tr>
<tr>
<td>byte</td>
<td>(byte)0</td>
</tr>
<tr>
<td>boolean</td>
<td>false</td>
</tr>
<tr>
<td>float</td>
<td>0.0f</td>
</tr>
<tr>
<td>double</td>
<td>0.0d</td>
</tr>
<tr>
<td>reference</td>
<td>null</td>
</tr>
</tbody></table>
<p><strong>å®æˆ˜ï¼š</strong> è¯´å‡ºä¸‹é¢ä¸¤æ®µä»£ç çš„è¡¨ç°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">code-snippet-1:</span><br><span class="line"></span><br><span class="line">public class A &#123;</span><br><span class="line">    static int a ;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        System.out.println(a);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">code-snippet-2:</span><br><span class="line"></span><br><span class="line">public class B &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        int a ;</span><br><span class="line">        System.out.println(a);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<details class="tag-plugin folding" color="green"><summary><span>Answer</span></summary><div class="body"><p>code-snippet-1 å°†ä¼šè¾“å‡º 0<br>code-snippet-2 å°†æ— æ³•é€šè¿‡ç¼–è¯‘</p><hr><p>è¿™æ˜¯å› ä¸ºå±€éƒ¨å˜é‡ä¸åƒç±»å˜é‡é‚£æ ·å­˜åœ¨å‡†å¤‡é˜¶æ®µã€‚ç±»å˜é‡æœ‰ä¸¤æ¬¡èµ‹åˆå§‹å€¼çš„è¿‡ç¨‹ï¼Œä¸€æ¬¡åœ¨å‡†å¤‡é˜¶æ®µï¼Œèµ‹äºˆåˆå§‹å€¼ï¼ˆä¹Ÿå¯ä»¥æ˜¯æŒ‡å®šå€¼ï¼‰ï¼›å¦å¤–ä¸€æ¬¡åœ¨åˆå§‹åŒ–é˜¶æ®µï¼Œèµ‹äºˆç¨‹åºå‘˜å®šä¹‰çš„å€¼ã€‚</p><p>å› æ­¤ï¼Œå³ä½¿ç¨‹åºå‘˜æ²¡æœ‰ä¸ºç±»å˜é‡èµ‹å€¼ä¹Ÿæ²¡æœ‰å…³ç³»ï¼Œå®ƒä»ç„¶æœ‰ä¸€ä¸ªé»˜è®¤çš„åˆå§‹å€¼ã€‚ä½†å±€éƒ¨å˜é‡å°±ä¸ä¸€æ ·äº†ï¼Œå¦‚æœæ²¡æœ‰ç»™å®ƒèµ‹åˆå§‹å€¼ï¼Œæ˜¯ä¸èƒ½ä½¿ç”¨çš„ã€‚</p></div></details>

<blockquote>
<ol start="3">
<li>è§£æResolution</li>
</ol>
</blockquote>
<p>è§£æé˜¶æ®µæ˜¯è™šæ‹Ÿæœºå°†å¸¸é‡æ± å†…çš„ç¬¦å·å¼•ç”¨æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨çš„è¿‡ç¨‹ã€‚æ¥äº†è§£ä¸€ä¸‹ç¬¦å·å¼•ç”¨å’Œç›´æ¥å¼•ç”¨æœ‰ä»€ä¹ˆåŒºåˆ«ï¼š</p>
<ol>
<li>ç¬¦å·å¼•ç”¨</li>
</ol>
<p>ç¬¦å·å¼•ç”¨æ˜¯ä¸€ç§å®šä¹‰ï¼Œå¯ä»¥æ˜¯ä»»ä½•å­—é¢ä¸Šçš„å«ä¹‰ï¼Œè€Œç›´æ¥å¼•ç”¨å°±æ˜¯ç›´æ¥æŒ‡å‘ç›®æ ‡çš„æŒ‡é’ˆã€ç›¸å¯¹åç§»é‡ã€‚</p>
<p>è¿™ä¸ªå…¶å®æ˜¯å±äºç¼–è¯‘åŸç†æ–¹é¢çš„æ¦‚å¿µï¼Œç¬¦å·å¼•ç”¨åŒ…æ‹¬äº†ä¸‹é¢ä¸‰ç±»å¸¸é‡ï¼š</p>
<ul>
<li>ç±»å’Œæ¥å£çš„å…¨é™å®šå</li>
<li>å­—æ®µçš„åç§°å’Œæè¿°ç¬¦</li>
<li>æ–¹æ³•çš„åç§°å’Œæè¿°ç¬¦</li>
</ul>
<p>è¿™ä¹ˆè¯´å¯èƒ½ä¸å¤ªå¥½ç†è§£ï¼Œç»“åˆå®é™…çœ‹ä¸€ä¸‹ï¼Œå†™ä¸€æ®µå¾ˆç®€å•çš„ä»£ç ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public class TestMain &#123;</span><br><span class="line">    private static int i;</span><br><span class="line">    private double d;</span><br><span class="line">    public static void print() &#123;&#125;</span><br><span class="line"></span><br><span class="line">    private boolean trueOrFalse()&#123;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç”¨javapæŠŠè¿™æ®µä»£ç çš„.classåç¼–è¯‘ä¸€ä¸‹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">Constant pool:</span><br><span class="line">#1 = Class #2 // com/xrq/test6/TestMain</span><br><span class="line">#2 = Utf8 com/xrq/test6/TestMain</span><br><span class="line">#3 = Class #4 // java/lang/Object</span><br><span class="line">#4 = Utf8 java/lang/Object</span><br><span class="line">#5 = Utf8 i</span><br><span class="line">#6 = Utf8 I</span><br><span class="line">#7 = Utf8 d</span><br><span class="line">#8 = Utf8 D</span><br><span class="line">#9 = Utf8 &lt;init&gt;</span><br><span class="line">#10 = Utf8 ()V</span><br><span class="line">#11 = Utf8 Code</span><br><span class="line">#12 = Methodref #3.#13 // java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span><br><span class="line">#13 = NameAndType #9:#10 // &quot;&lt;init&gt;&quot;:()V</span><br><span class="line">#14 = Utf8 LineNumberTable</span><br><span class="line">#15 = Utf8 LocalVariableTable</span><br><span class="line">#16 = Utf8 this</span><br><span class="line">#17 = Utf8 Lcom/xrq/test6/TestMain;</span><br><span class="line">#18 = Utf8 print</span><br><span class="line">#19 = Utf8 trueOrFalse</span><br><span class="line">#20 = Utf8 ()Z</span><br><span class="line">#21 = Utf8 SourceFile</span><br><span class="line">#22 = Utf8 TestMain.java</span><br></pre></td></tr></table></figure>

<p>çœ‹åˆ°Constant Poolä¹Ÿå°±æ˜¯å¸¸é‡æ± ä¸­æœ‰22é¡¹å†…å®¹ï¼Œå…¶ä¸­å¸¦â€Utf8â€çš„å°±æ˜¯ç¬¦å·å¼•ç”¨ã€‚æ¯”å¦‚#2ï¼Œå®ƒçš„å€¼æ˜¯â€com/xrq/test6/TestMainâ€ï¼Œè¡¨ç¤ºçš„æ˜¯è¿™ä¸ªç±»çš„å…¨é™å®šåï¼›åˆæ¯”å¦‚#5ä¸ºiï¼Œ#6ä¸ºIï¼Œå®ƒä»¬æ˜¯ä¸€å¯¹çš„ï¼Œè¡¨ç¤ºå˜é‡æ—¶Integerï¼ˆintï¼‰ç±»å‹çš„ï¼Œåå­—å«åšiï¼›#6ä¸ºDã€#7ä¸ºdä¹Ÿæ˜¯ä¸€æ ·ï¼Œè¡¨ç¤ºä¸€ä¸ªDoubleï¼ˆdoubleï¼‰ç±»å‹çš„å˜é‡ï¼Œåå­—ä¸ºdï¼›</p>
<p>#18ã€#19è¡¨ç¤ºçš„éƒ½æ˜¯æ–¹æ³•çš„åå­—ã€‚</p>
<p>æ€»è€Œè¨€ä¹‹ï¼Œç¬¦å·å¼•ç”¨å’Œæˆ‘ä»¬ä¸Šé¢è®²çš„æ˜¯ä¸€æ ·çš„ï¼Œæ˜¯å¯¹äºç±»ã€å˜é‡ã€æ–¹æ³•çš„æè¿°ã€‚ç¬¦å·å¼•ç”¨å’Œè™šæ‹Ÿæœºçš„å†…å­˜å¸ƒå±€æ˜¯æ²¡æœ‰å…³ç³»çš„ï¼Œå¼•ç”¨çš„ç›®æ ‡æœªå¿…å·²ç»åŠ è½½åˆ°å†…å­˜ä¸­äº†ã€‚</p>
<ol start="2">
<li>ç›´æ¥å¼•ç”¨</li>
</ol>
<p>ç›´æ¥å¼•ç”¨å¯ä»¥æ˜¯ç›´æ¥æŒ‡å‘ç›®æ ‡çš„æŒ‡é’ˆã€ç›¸å¯¹åç§»é‡æˆ–æ˜¯ä¸€ä¸ªèƒ½é—´æ¥å®šä½åˆ°ç›®æ ‡çš„å¥æŸ„ã€‚ç›´æ¥å¼•ç”¨æ˜¯å’Œè™šæ‹Ÿæœºå®ç°çš„å†…å­˜å¸ƒå±€ç›¸å…³çš„ï¼ŒåŒä¸€ä¸ªç¬¦å·å¼•ç”¨åœ¨ä¸åŒçš„è™šæ‹Ÿæœºç¤ºä¾‹ä¸Šç¿»è¯‘å‡ºæ¥çš„ç›´æ¥å¼•ç”¨ä¸€èˆ¬ä¸ä¼šç›¸åŒã€‚å¦‚æœæœ‰äº†ç›´æ¥å¼•ç”¨ï¼Œé‚£å¼•ç”¨çš„ç›®æ ‡å¿…å®šå·²ç»å­˜åœ¨åœ¨å†…å­˜ä¸­äº†ã€‚</p>
<p>è§£æé˜¶æ®µè´Ÿè´£æŠŠæ•´ä¸ªç±»æ¿€æ´»ï¼Œä¸²æˆä¸€ä¸ªå¯ä»¥æ‰¾åˆ°å½¼æ­¤çš„ç½‘ï¼Œè¿‡ç¨‹ä¸å¯è°“ä¸é‡è¦ã€‚é‚£è¿™ä¸ªé˜¶æ®µéƒ½åšäº†å“ªäº›å·¥ä½œå‘¢ï¼Ÿå¤§ä½“å¯ä»¥åˆ†ä¸ºï¼š</p>
<ul>
<li>ç±»æˆ–æ¥å£çš„è§£æ</li>
<li>ç±»æ–¹æ³•è§£æ</li>
<li>æ¥å£æ–¹æ³•è§£æ</li>
<li>å­—æ®µè§£æ</li>
</ul>
<h3 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h3><p>ç±»çš„åˆå§‹åŒ–é˜¶æ®µæ˜¯ç±»åŠ è½½è¿‡ç¨‹çš„æœ€åä¸€ä¸ªæ­¥éª¤ï¼Œ ä¹‹å‰ä»‹ç»çš„å‡ ä¸ªç±»åŠ è½½çš„åŠ¨ä½œé‡Œï¼Œ é™¤äº†åœ¨åŠ è½½é˜¶æ®µç”¨æˆ·åº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡è‡ªå®šä¹‰ç±»åŠ è½½å™¨çš„æ–¹å¼å±€éƒ¨å‚ä¸å¤–ï¼Œ å…¶ä½™åŠ¨ä½œéƒ½å®Œå…¨ç”±Javaè™šæ‹Ÿæœºæ¥ä¸»å¯¼æ§åˆ¶ã€‚ ç›´åˆ°åˆå§‹åŒ–æ®µï¼ŒJava è™šæ‹Ÿæœºæ‰çœŸæ­£å¼€å§‹æ‰§è¡Œç±»ä¸­ç¼–å†™çš„Javaç¨‹åºä»£ç ï¼Œ å°†ä¸»å¯¼æƒç§»äº¤ç»™åº”ç”¨ç¨‹åºã€‚</p>
<p>åˆå§‹åŒ–é˜¶æ®µå°±æ˜¯æ‰§è¡Œç±»æ„é€ å™¨clinit()æ–¹æ³•çš„è¿‡ç¨‹ã€‚ clinit()å¹¶ä¸æ˜¯ç¨‹åºå‘˜åœ¨Javaä»£ç ä¸­ç›´æ¥ç¼–å†™çš„æ–¹æ³•ï¼Œ å®ƒæ˜¯Javacç¼–è¯‘å™¨çš„è‡ªåŠ¨ç”Ÿæˆç‰©ã€‚</p>
<p>clinit()æ–¹æ³•æ˜¯ç”±ç¼–è¯‘å™¨è‡ªåŠ¨æ”¶é›†ç±»ä¸­çš„æ‰€æœ‰ç±»å˜é‡çš„èµ‹å€¼åŠ¨ä½œå’Œé™æ€è¯­å¥å—ï¼ˆstatic{}å—ï¼‰ ä¸­çš„è¯­å¥åˆå¹¶äº§ç”Ÿçš„ï¼Œ ç¼–è¯‘å™¨æ”¶é›†çš„é¡ºåºæ˜¯ç”±è¯­å¥åœ¨æºæ–‡ä»¶ä¸­å‡ºç°çš„é¡ºåºå†³å®šçš„ï¼Œ é™æ€è¯­å¥å—ä¸­åªèƒ½è®¿é—®åˆ°å®šä¹‰åœ¨é™æ€è¯­å¥å—ä¹‹å‰çš„å˜é‡ï¼Œ å®šä¹‰åœ¨å®ƒä¹‹åçš„å˜é‡ï¼Œåœ¨å‰é¢çš„é™æ€è¯­å¥å—å¯ä»¥èµ‹å€¼ï¼Œ ä½†æ˜¯ä¸èƒ½è®¿é—®ï¼Œ å¦‚ä¸‹ä»£ç </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public class TestClinit &#123;</span><br><span class="line">    static &#123;</span><br><span class="line">        i = 0; // ç»™å˜é‡å¤åˆ¶å¯ä»¥æ­£å¸¸ç¼–è¯‘é€šè¿‡</span><br><span class="line">        System.out.print(i); // è¿™å¥ç¼–è¯‘å™¨ä¼šæç¤ºâ€œéæ³•å‘å‰å¼•ç”¨â€</span><br><span class="line">    &#125;</span><br><span class="line">    static int i = 1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>clinit()æ–¹æ³•ä¸ç±»çš„æ„é€ å‡½æ•°ï¼ˆå³åœ¨è™šæ‹Ÿæœºè§†è§’ä¸­çš„å®ä¾‹æ„é€ å™¨()æ–¹æ³•ï¼‰ ä¸åŒï¼Œ å®ƒä¸éœ€è¦æ˜¾å¼åœ°è°ƒç”¨çˆ¶ç±»æ„é€ å™¨ï¼Œ Javaè™šæ‹Ÿæœºä¼šä¿è¯åœ¨å­ç±»çš„clinit()æ–¹æ³•æ‰§è¡Œå‰ï¼Œ çˆ¶ç±»çš„clinit()æ–¹æ³•å·²ç»æ‰§è¡Œ å®Œæ¯•ã€‚ å› æ­¤åœ¨Javaè™šæ‹Ÿæœºä¸­ç¬¬ä¸€ä¸ªè¢«æ‰§è¡Œçš„clinit()æ–¹æ³•çš„ç±»å‹è‚¯å®šæ˜¯java.lang.Objectã€‚</p>
<p>ç”±äºçˆ¶ç±»çš„clinit()æ–¹æ³•å…ˆæ‰§è¡Œï¼Œ ä¹Ÿå°±æ„å‘³ç€çˆ¶ç±»ä¸­å®šä¹‰çš„é™æ€è¯­å¥å—è¦ä¼˜å…ˆäºå­ç±»çš„å˜é‡èµ‹å€¼æ“ä½œï¼Œ å¦‚ä¸‹ä»£ç ä¸­ï¼Œ å­—æ®µBçš„å€¼å°†ä¼šæ˜¯2è€Œä¸æ˜¯1ã€‚æ–¹æ³•æ‰§è¡Œé¡ºåº</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">class TestClinit02 &#123;</span><br><span class="line">    static class Parent &#123;</span><br><span class="line">        public static int A = 1;</span><br><span class="line">        static &#123;</span><br><span class="line">            A = 2;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    static class Sub extends Parent &#123;</span><br><span class="line">        public static int B = A;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        System.out.println(Sub.B);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">output: 2</span><br></pre></td></tr></table></figure>

<p>clinit()æ–¹æ³•å¯¹äºç±»æˆ–æ¥å£æ¥è¯´å¹¶ä¸æ˜¯å¿…éœ€çš„ï¼Œ å¦‚æœä¸€ä¸ªç±»ä¸­æ²¡æœ‰é™æ€è¯­å¥å—ï¼Œ ä¹Ÿæ²¡æœ‰å¯¹å˜é‡çš„èµ‹å€¼æ“ä½œï¼Œ é‚£ä¹ˆç¼–è¯‘å™¨å¯ä»¥ä¸ä¸ºè¿™ä¸ªç±»ç”Ÿæˆclinit()æ–¹æ³•ã€‚ æ¥å£ä¸­ä¸èƒ½ä½¿ç”¨é™æ€è¯­å¥å—ï¼Œ ä½†ä»ç„¶æœ‰å˜é‡åˆå§‹åŒ–çš„èµ‹å€¼æ“ä½œï¼Œ å› æ­¤æ¥å£ä¸ç±»ä¸€æ ·éƒ½ä¼šç”Ÿæˆ clinit()æ–¹æ³•ã€‚</p>
<p>ä½†æ¥å£ä¸ç±»ä¸åŒçš„æ˜¯ï¼Œ æ‰§è¡Œæ¥å£çš„clinit()æ–¹æ³•ä¸éœ€è¦å…ˆæ‰§è¡Œçˆ¶æ¥å£çš„clinit()æ–¹æ³•ï¼Œ å› ä¸ºåªæœ‰å½“çˆ¶æ¥å£ä¸­å®šä¹‰çš„å˜é‡è¢«ä½¿ç”¨æ—¶ï¼Œ çˆ¶æ¥å£æ‰ä¼šè¢«åˆå§‹åŒ–ã€‚ æ­¤å¤–ï¼Œ æ¥å£çš„å®ç°ç±»åœ¨åˆå§‹åŒ–æ—¶ä¹Ÿä¸€æ ·ä¸ä¼šæ‰§è¡Œæ¥å£çš„clinit()æ–¹æ³•ã€‚</p>
<p>Javaè™šæ‹Ÿæœºå¿…é¡»ä¿è¯ä¸€ä¸ªç±»çš„clinit()æ–¹æ³•åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­è¢«æ­£ç¡®åœ°åŠ é”åŒæ­¥ï¼Œ å¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶å»åˆå§‹åŒ–ä¸€ä¸ªç±»ï¼Œ é‚£ä¹ˆåªä¼šæœ‰å…¶ä¸­ä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œè¿™ä¸ªç±»çš„clinit()æ–¹æ³•ï¼Œ å…¶ä»–çº¿ç¨‹éƒ½éœ€è¦é˜»å¡ç­‰å¾…ï¼Œ ç›´åˆ°æ´»åŠ¨çº¿ç¨‹æ‰§è¡Œå®Œæ¯•clinit()æ–¹æ³•ã€‚ å¦‚æœåœ¨ä¸€ä¸ªç±»çš„clinit()æ–¹æ³•ä¸­æœ‰è€—æ—¶å¾ˆé•¿çš„æ“ä½œï¼Œ é‚£å°±å¯èƒ½é€ æˆå¤šä¸ªè¿›ç¨‹é˜»å¡ï¼Œ åœ¨å®é™…åº”ç”¨ä¸­è¿™ç§é˜»å¡å¾€å¾€æ˜¯å¾ˆéšè”½çš„ã€‚ </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">class TestDeadLoop &#123;</span><br><span class="line">    static class DeadLoopClass &#123;</span><br><span class="line">        static &#123;</span><br><span class="line">            // å¦‚æœä¸åŠ ä¸Šè¿™ä¸ªifè¯­å¥ï¼Œ ç¼–è¯‘å™¨å°†æç¤ºâ€œInitializer does not complete normallyâ€æ‹’ç»ç¼–è¯‘</span><br><span class="line">            if (true) &#123;</span><br><span class="line">                System.out.println(Thread.currentThread() + &quot;init DeadLoopClass&quot;);</span><br><span class="line">                while (true) &#123;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Runnable script = new Runnable() &#123;</span><br><span class="line">            public void run() &#123;</span><br><span class="line">                System.out.println(Thread.currentThread() + &quot;start&quot;);</span><br><span class="line">                DeadLoopClass dlc = new DeadLoopClass();</span><br><span class="line">                System.out.println(Thread.currentThread() + &quot; run over&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        Thread thread1 = new Thread(script);</span><br><span class="line">        Thread thread2 = new Thread(script);</span><br><span class="line">        thread1.start();</span><br><span class="line">        thread2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="cinit-å’Œ-init-çš„åŒºåˆ«"><a href="#cinit-å’Œ-init-çš„åŒºåˆ«" class="headerlink" title="cinit å’Œ init çš„åŒºåˆ«"></a>cinit å’Œ init çš„åŒºåˆ«</h2><p>ä¸»è¦æ˜¯ä¸ºäº†å¼„æ˜ç™½ç±»çš„åˆå§‹åŒ–å’Œå¯¹è±¡çš„åˆå§‹åŒ–ä¹‹é—´çš„å·®åˆ«ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">public class ParentA &#123;</span><br><span class="line">    static &#123;</span><br><span class="line">        System.out.println(&quot;1&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public ParentA() &#123;</span><br><span class="line">        System.out.println(&quot;2&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class SonB extends ParentA &#123;</span><br><span class="line">    static &#123;</span><br><span class="line">        System.out.println(&quot;a&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public SonB() &#123;</span><br><span class="line">        System.out.println(&quot;b&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ParentA ab = new SonB();</span><br><span class="line">        ab = new SonB();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Answer:</span><br><span class="line"></span><br><span class="line">1</span><br><span class="line">a</span><br><span class="line">2</span><br><span class="line">b</span><br><span class="line">2</span><br><span class="line">b</span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­ static å­—æ®µå’Œ static ä»£ç å—ï¼Œæ˜¯å±äºç±»çš„ï¼Œåœ¨ç±»çš„åŠ è½½çš„åˆå§‹åŒ–é˜¶æ®µå°±å·²ç»è¢«æ‰§è¡Œã€‚ç±»ä¿¡æ¯ä¼šè¢«å­˜æ”¾åœ¨æ–¹æ³•åŒºï¼Œåœ¨åŒä¸€ä¸ªç±»åŠ è½½å™¨ä¸‹ï¼Œè¿™äº›ä¿¡æ¯æœ‰ä¸€ä»½å°±å¤Ÿäº†ï¼Œæ‰€ä»¥ä¸Šé¢çš„ static ä»£ç å—åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œå®ƒå¯¹åº”çš„æ˜¯ cinit æ–¹æ³•ã€‚</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/gaoyanliang/cdn/blog/img/post/java/jvm/jvm-39.png"></p>
<p>æ‰€ä»¥ï¼Œä¸Šé¢ä»£ç çš„ static ä»£ç å—åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œå¯¹è±¡çš„æ„é€ æ–¹æ³•æ‰§è¡Œä¸¤æ¬¡ã€‚å†åŠ ä¸Šç»§æ‰¿å…³ç³»çš„å…ˆååŸåˆ™ï¼Œä¸éš¾åˆ†æå‡ºæ­£ç¡®ç»“æœã€‚</p>
<p><strong>ç»“è®º:</strong></p>
<p>æ–¹æ³• cinit çš„æ‰§è¡Œæ—¶æœŸ: ç±»åˆå§‹åŒ–é˜¶æ®µ(è¯¥æ–¹æ³•åªèƒ½è¢«jvmè°ƒç”¨, ä¸“é—¨æ‰¿æ‹…ç±»å˜é‡çš„åˆå§‹åŒ–å·¥ä½œ) ,åªæ‰§è¡Œä¸€æ¬¡</p>
<p>æ–¹æ³• init çš„æ‰§è¡Œæ—¶æœŸ: å¯¹è±¡çš„åˆå§‹åŒ–é˜¶æ®µ</p>


<div class="article-footer reveal fs14"><section id="license"><div class="header"><span>License</span></div><div class="body"><p>æœ¬æ–‡é‡‡ç”¨ <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…</a> è®¸å¯åè®®ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>
</div></section></div>

</article>

<div class="related-wrap reveal" id="read-next"><section class="body"><div class="item" id="prev"><div class="note">Newer</div><a href="/java/jvm/jvm-class-loader2/">ç±»åŠ è½½å™¨</a></div><div class="item" id="next"><div class="note">Older</div><a href="/java/jvm/jvm-memory-manager/">JVM å†…å­˜ç®¡ç†</a></div></section></div>






  <div class='related-wrap md reveal' id="comments">
    <div class='cmt-title cap theme'>
      Join the discussion
    </div>
    <div class='cmt-body beaudar'>
      

<svg class="loading" style="vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2709"><path d="M832 512c0-176-144-320-320-320V128c211.2 0 384 172.8 384 384h-64zM192 512c0 176 144 320 320 320v64C300.8 896 128 723.2 128 512h64z" p-id="2710"></path></svg>

<div id="beaudar" repo="gaoyanliang/beaudar" issue-term="pathname" theme="preferred-color-scheme" input-position="top" comment-order="desc" loading="false" branch="main"></div>

    </div>
  </div>



      
<footer class="page-footer reveal fs12"><hr><div class="sitemap"><div class="sitemap-group"><span class="fs14">Blog</span><a href="/">Recent Update</a><a href="/blog/categories/">Categories</a><a href="/blog/tags/">Tags</a><a href="/blog/archives/">Archives</a></div><div class="sitemap-group"><span class="fs14">Wiki</span><a href="/wiki/tags/%E6%8A%80%E6%9C%AF%E5%8A%A0%E6%B2%B9%E7%AB%99/">æŠ€æœ¯åŠ æ²¹ç«™</a><a href="/wiki/">...</a></div><div class="sitemap-group"><span class="fs14">Social</span><a href="/friends/">Friends</a><a href="/about/#comments">Comments</a><a target="_blank" rel="noopener" href="https://open.spotify.com/">Spotify</a></div><div class="sitemap-group"><span class="fs14">More</span><a href="/about/">About</a><a href="/wiki/resume">Resume</a><a target="_blank" rel="noopener" href="https://github.com/gyl-coder">GitHub</a></div></div><div class="text"><p>æœ¬ç«™ç”± <a href="/">@anonymity</a> ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://github.com/xaoxuu/hexo-theme-stellar">Stellar</a> ä¸»é¢˜åˆ›å»ºã€‚<br>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>
</div></footer>

      <div class='float-panel mobile-only blur' style='display:none'>
  <button type='button' class='sidebar-toggle mobile' onclick='sidebar.toggle()'>
    <svg class="icon" style="width: 1em; height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15301"><path d="M566.407 808.3c26.9-0.1 49.3-20.8 51.6-47.6-1.9-27.7-23.9-49.7-51.6-51.6h-412.6c-28.2-1.4-52.6 19.5-55.5 47.6 2.3 26.8 24.6 47.5 51.6 47.6h416.5v4z m309.3-249.9c26.9-0.1 49.3-20.8 51.6-47.6-2.2-26.8-24.6-47.5-51.6-47.6h-721.9c-27.7-2.8-52.5 17.4-55.3 45.1-0.1 0.8-0.1 1.7-0.2 2.5 0.9 27.2 23.6 48.5 50.7 47.6H875.707z m-103.1-245.9c26.9-0.1 49.3-20.8 51.6-47.6-0.4-28.3-23.2-51.1-51.5-51.6h-618.9c-29.5-1.1-54.3 21.9-55.5 51.4v0.2c1.4 27.8 25.2 49.2 53 47.8 0.8 0 1.7-0.1 2.5-0.2h618.8z" p-id="15302"></path><path d="M566.407 808.3c26.9-0.1 49.3-20.8 51.6-47.6-1.9-27.7-23.9-49.7-51.6-51.6h-412.6c-28.2-1.4-52.6 19.5-55.5 47.6 1.9 27.7 23.9 49.7 51.6 51.6h416.5z m309.3-249.9c26.9-0.1 49.3-20.8 51.6-47.6-2.2-26.8-24.6-47.5-51.6-47.6h-721.9c-27.7-2.8-52.5 17.4-55.3 45.1-0.1 0.8-0.1 1.7-0.2 2.5 0.9 27.2 23.6 48.5 50.7 47.6H875.707z m-103.1-245.9c26.9-0.1 49.3-20.8 51.6-47.6-0.4-28.3-23.2-51.1-51.5-51.6h-618.9c-29.5-1.1-54.3 21.9-55.5 51.4v0.2c1.4 27.8 25.2 49.2 53 47.8 0.8 0 1.7-0.1 2.5-0.2h618.8z" p-id="15303"></path></svg>
  </button>
</div>

    </div>
  </div>
  <div class='scripts'>
    <script type="text/javascript">
  stellar = {
    // æ‡’åŠ è½½ css https://github.com/filamentgroup/loadCSS
    loadCSS: (href, before, media, attributes) => {
      var doc = window.document;
      var ss = doc.createElement("link");
      var ref;
      if (before) {
        ref = before;
      } else {
        var refs = (doc.body || doc.getElementsByTagName("head")[0]).childNodes;
        ref = refs[refs.length - 1];
      }
      var sheets = doc.styleSheets;
      if (attributes) {
        for (var attributeName in attributes) {
          if (attributes.hasOwnProperty(attributeName)) {
            ss.setAttribute(attributeName, attributes[attributeName]);
          }
        }
      }
      ss.rel = "stylesheet";
      ss.href = href;
      ss.media = "only x";
      function ready(cb) {
        if (doc.body) {
          return cb();
        }
        setTimeout(function () {
          ready(cb);
        });
      }
      ready(function () {
        ref.parentNode.insertBefore(ss, before ? ref : ref.nextSibling);
      });
      var onloadcssdefined = function (cb) {
        var resolvedHref = ss.href;
        var i = sheets.length;
        while (i--) {
          if (sheets[i].href === resolvedHref) {
            return cb();
          }
        }
        setTimeout(function () {
          onloadcssdefined(cb);
        });
      };
      function loadCB() {
        if (ss.addEventListener) {
          ss.removeEventListener("load", loadCB);
        }
        ss.media = media || "all";
      }
      if (ss.addEventListener) {
        ss.addEventListener("load", loadCB);
      }
      ss.onloadcssdefined = onloadcssdefined;
      onloadcssdefined(loadCB);
      return ss;
    },

    // ä» butterfly å’Œ volantis è·å¾—çµæ„Ÿ
    loadScript: (src, opt) => new Promise((resolve, reject) => {
      var script = document.createElement('script');
      script.src = src;
      if (opt) {
        for (let key of Object.keys(opt)) {
          script[key] = opt[key]
        }
      } else {
        // é»˜è®¤å¼‚æ­¥ï¼Œå¦‚æœéœ€è¦åŒæ­¥ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ {} å³å¯
        script.async = true
      }
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    }),

    // https://github.com/jerryc127/hexo-theme-butterfly
    jQuery: (fn) => {
      if (typeof jQuery === 'undefined') {
        stellar.loadScript(stellar.plugins.jQuery).then(fn)
      } else {
        fn()
      }
    }
  };
  stellar.github = 'https://github.com/xaoxuu/hexo-theme-stellar/tree/1.12.0';
  stellar.config = {
    date_suffix: {
      just: 'Just',
      min: 'minutes ago',
      hour: 'hours ago',
      day: 'days ago',
      month: 'months ago',
    },
  };

  // required plugins (only load if needs)
  stellar.plugins = {
    jQuery: 'https://fastly.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js'
  };

  // stellar js
  stellar.plugins.stellar = Object.assign({"sites":"/js/plugins/sites.js","friends":"/js/plugins/friends.js","ghinfo":"/js/plugins/ghinfo.js","timeline":"/js/plugins/timeline.js","linkcard":"/js/plugins/linkcard.js"});
  stellar.plugins.marked = Object.assign("https://cdn.bootcdn.net/ajax/libs/marked/4.0.18/marked.min.js");

  // optional plugins
  if ('true' == 'true') {
    stellar.plugins.lazyload = Object.assign({"enable":true,"js":"https://fastly.jsdelivr.net/npm/vanilla-lazyload@17.3.1/dist/lazyload.min.js","transition":"blur"});
  }
  if ('true' == 'true') {
    stellar.plugins.swiper = Object.assign({"enable":true,"css":"https://unpkg.com/swiper@6/swiper-bundle.min.css","js":"https://unpkg.com/swiper@6/swiper-bundle.min.js"});
  }
  
  // -------- start è‡ªå®šä¹‰é¦–é¡µæ–‡ç« è½®æ’­
  if ('true' == 'true') {
    stellar.plugins.customSwiperTopArticle = Object.assign({"enable":true,"css":"https://cdn.jsdelivr.net/gh/XuxuGood/simple-blog-cdn@main/css/swiper/swiper.min.css","js":"https://cdn.jsdelivr.net/gh/XuxuGood/simple-blog-cdn@main/js/swiper/swiper.min.js","init_js":"https://cdn.jsdelivr.net/gh/XuxuGood/simple-blog-cdn@main/js/swiper/swiper_init.js"});
  }
  // -------- end è‡ªå®šä¹‰é¦–é¡µæ–‡ç« è½®æ’­

  if ('' == 'true') {
    stellar.plugins.scrollreveal = Object.assign({"enable":null,"js":"https://fastly.jsdelivr.net/npm/scrollreveal@4.0.9/dist/scrollreveal.min.js","distance":"8px","duration":500,"interval":100,"scale":1});
  }
  if ('true' == 'true') {
    stellar.plugins.preload = Object.assign({"enable":true,"service":"flying_pages","instant_page":"https://fastly.jsdelivr.net/gh/volantis-x/cdn-volantis@4.1.2/js/instant_page.js","flying_pages":"https://fastly.jsdelivr.net/gh/gijo-varghese/flying-pages@2.1.2/flying-pages.min.js"});
  }
  if ('true' == 'true') {
    stellar.plugins.fancybox = Object.assign({"enable":true,"js":"https://fastly.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.umd.js","css":"https://fastly.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.css","selector":".swiper-slide img"});
  }
  if ('false' == 'true') {
    stellar.plugins.heti = Object.assign({"enable":false,"css":"https://unpkg.com/heti/umd/heti.min.css","js":"https://unpkg.com/heti/umd/heti-addon.min.js"});
  }
</script>

<!-- required -->

  
<script src="/js/main.js" async></script>



<!-- optional -->

  <script>
  function loadBeaudar() {
    const els = document.querySelectorAll("#comments #beaudar");
    if (els.length === 0) return;
    els.forEach((el, i) => {
      try {
        el.innerHTML = '';
      } catch (error) {
        console.log(error);
      }
      var script = document.createElement('script');
      script.src = 'https://beaudar.lipk.org/client.js';
      script.async = true;
      for (let key of Object.keys(el.attributes)) {
        let attr = el.attributes[key];
        if (['class', 'id'].includes(attr.name) === false) {
          script.setAttribute(attr.name, attr.value);
        }
      }
      el.appendChild(script);
    });
  }
  window.addEventListener('DOMContentLoaded', (event) => {
      loadBeaudar();
  });
</script>




<!-- inject -->


  </div>
</body>
</html>
